$(document).ready(function(){function t(t){}function a(){var t=JSON.stringify(c);sessionStorage.setItem("tagsWanted",t)}function e(){var a=sessionStorage.getItem("tagsWanted");t("load "),c=JSON.parse(a)}function i(){if(c.length){var e=c.join(" ");t(e),$.ajax({url:"https://api.flickr.com/services/feeds/photos_public.gne",dataType:"jsonp",data:{tags:e,format:"json"}})}a()}function n(a){l();for(var e=0;e<a.length;e++){var n=$("<div class='chip'>"+a[e]+"<i class='close material-icons' data-tag='"+a[e]+"'>close</i></div>");$(".row.tags").append(n),n.find("i").click(function(){var a=this.dataset.tag;t(c),c=$.grep(c,function(t){return t!=a}),t(c),s(),i()})}}function o(a,e){var i=0;e&&a.items.length>e?(i=e,t("data>howMuch"),t(i)):(i=a.items.length,t("NO"));for(var n=0;n<i;n++){var o=a.items[n],s={id:n,title:o.title,media:o.media,tags:o.tags},l=$("#photoPatron").clone();l.attr("id",s.id),l.addClass("grid-item"),l.find("img").attr("src",s.media.m),l.find("img").css("opacity",1),$(grid).prepend(l)}d.imagesLoaded(function(t){$("#loadingDiv").hide(),d.masonry("reloadItems"),d.masonry("layout")})}function s(){$(".grid .grid-item").not("#photoPatron").remove()}function l(){$(".row.tags div").remove()}var r=document.getElementById("noRange");noUiSlider.create(r,{start:[100],step:1,tooltips:[wNumb({decimals:0})],range:{min:[0],max:[100]}}),AOS.init();var d=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".gutter-sizer",percentPosition:!0,initLayout:!1,transitionDuration:0});$(".button-collapse").sideNav({closeOnClick:!0}),$(".button-search").sideNav({closeOnClick:!0,edge:"right"});var c=[];sessionStorage.tagsWanted&&(e(),n(c),i()),$("nav ul li a.flickrTag").click(function(){$("nav ul li").removeClass("active"),$(this).parent().addClass("active"),s(),c=[$(this).html()],n(c),i()}),$("#addTagsButton").click(function(){if(""===$("#tagsWanted").val())$("#tagsWanted").addClass("invalid");else{t($("#tagsWanted").val()),$("nav ul li").removeClass("active"),$(".button-search").sideNav("hide");var a=$("#tagsWanted").val();$.merge(c,a.split(",")),n(c),s(),i()}}),$("#addTagsButtonMobile").click(function(){if(""===$("#tagsWantedMobile").val())$("#tagsWantedMobile").addClass("invalid");else{t($("#tagsWantedMobile").val()),$("nav ul li").removeClass("active"),$(".button-search").sideNav("hide");var a=$("#tagsWantedMobile").val();$.merge(c,a.split(",")),n(c),s(),i()}});var g=null;r.noUiSlider.on("change",function(t,a){g=t[a],s(),i()});$("#loadingDiv").hide();$.ajaxSetup({beforeSend:function(){$("#loadingDiv").show()},complete:function(){},success:function(){}}),jsonFlickrFeed=function(a){t("data"),t(a),o(a,g)},d.on("layoutComplete",function(t,a){AOS.refresh(),console.log("layoutComplete")})});