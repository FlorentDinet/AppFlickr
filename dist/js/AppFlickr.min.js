$(document).ready(function(){function t(){var t=JSON.stringify(c);sessionStorage.setItem("tagsWanted",t)}function e(){var t=sessionStorage.getItem("tagsWanted");console.log("load "),c=JSON.parse(t)}function a(){if(c.length){var e=c.join(" ");console.log(e),$.ajax({url:"https://api.flickr.com/services/feeds/photos_public.gne",dataType:"jsonp",data:{tags:e,format:"json"}})}t()}function o(t){s();for(var e=0;e<t.length;e++){var o=$("<div class='chip'>"+t[e]+"<i class='close material-icons' data-tag='"+t[e]+"'>close</i></div>");$(".row.tags").append(o),o.find("i").click(function(){var t=this.dataset.tag;console.log(c),c=$.grep(c,function(e){return e!=t}),console.log(c),n(),a()})}}function i(t,e){var a=0;e&&t.items.length>e?(a=e,console.log("data>howMuch"),console.log(a)):(a=t.items.length,console.log("NO"));for(var o=0;o<a;o++){var i=t.items[o],n={id:o,title:i.title,media:i.media,tags:i.tags},s=$("#photoPatron").clone();s.attr("id",n.id),s.addClass("grid-item"),s.find("img").attr("src",n.media.m),$(".grid").prepend(s)}l.masonry("reloadItems"),l.imagesLoaded().progress(function(){l.masonry("layout")})}function n(){$(".grid div.grid-item").not("#photoPatron").remove()}function s(){$(".row.tags div").remove()}var l=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".gutter-sizer",percentPosition:!0});$(".button-collapse").sideNav({closeOnClick:!0}),$(".button-search").sideNav({closeOnClick:!0});var c=[];sessionStorage.tagsWanted&&(e(),o(c),a()),$("nav ul li a.flickrTag").click(function(){$("nav ul li").removeClass("active"),$(this).parent().addClass("active"),n(),c=[$(this).html()],o(c),a()}),$("#addTagsButton").click(function(){if(""===$("#tagsWanted").val())$("#tagsWanted").addClass("invalid");else{console.log($("#tagsWanted").val()),$("nav ul li").removeClass("active"),$(".button-search").sideNav("hide");var t=$("#tagsWanted").val();$.merge(c,t.split(" ")),o(c),n(),a()}});var r=null;$("#howMuchSlider").change(function(){r=$(this).val(),n(),a()});$("#loadingDiv").hide();$.ajaxSetup({beforeSend:function(){$("#loadingDiv").show()},complete:function(){$("#loadingDiv").hide()},success:function(){}}),jsonFlickrFeed=function(t){console.log("data"),console.log(t),i(t,r)}});