$(document).ready(function(){function t(t){}function a(){var t=JSON.stringify(d);sessionStorage.setItem("tagsWanted",t)}function i(){var a=sessionStorage.getItem("tagsWanted");t("load "),d=JSON.parse(a)}function e(){if(d.length){var i=d.join(" ");t(i),$.ajax({url:"https://api.flickr.com/services/feeds/photos_public.gne",dataType:"jsonp",data:{tags:i,format:"json"}})}a()}function n(a){r();for(var i=0;i<a.length;i++){var n=$("<div class='chip'>"+a[i]+"<i class='close material-icons' data-tag='"+a[i]+"'>close</i></div>");$(".row.tags").append(n),n.find("i").click(function(){var a=this.dataset.tag;t(d),d=$.grep(d,function(t){return t!=a}),t(d),s(),e()})}}function o(a,i){var e=0;i&&a.items.length>i?(e=i,t("data>howMuch"),t(e)):(e=a.items.length,t("NO"));for(var n=0;n<e;n++){var o=a.items[n],s={id:n,title:o.title,media:o.media,tags:o.tags},r=$("#photoPatron").clone();r.attr("id",s.id),r.addClass("grid-item"),r.find("img").attr("src",s.media.m),r.find("img").css("opacity",1),$(grid).prepend(r)}c.imagesLoaded(function(t){$("#loadingDiv").hide(),c.masonry("reloadItems"),c.masonry("layout")})}function s(){$(".grid .grid-item").not("#photoPatron").remove()}function r(){$(".row.tags div").remove()}AOS.init();var c=$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".gutter-sizer",percentPosition:!0,initLayout:!1,transitionDuration:0});$(".button-collapse").sideNav({closeOnClick:!0}),$(".button-search").sideNav({closeOnClick:!0});var d=[];sessionStorage.tagsWanted&&(i(),n(d),e()),$("nav ul li a.flickrTag").click(function(){$("nav ul li").removeClass("active"),$(this).parent().addClass("active"),s(),d=[$(this).html()],n(d),e()}),$("#addTagsButton").click(function(){if(""===$("#tagsWanted").val())$("#tagsWanted").addClass("invalid");else{t($("#tagsWanted").val()),$("nav ul li").removeClass("active"),$(".button-search").sideNav("hide");var a=$("#tagsWanted").val();$.merge(d,a.split(",")),n(d),s(),e()}});var l=null;$("#howMuchSlider").change(function(){l=$(this).val(),s(),e()});$("#loadingDiv").hide();$.ajaxSetup({beforeSend:function(){$("#loadingDiv").show()},complete:function(){},success:function(){}}),jsonFlickrFeed=function(a){t("data"),t(a),o(a,l)},c.on("layoutComplete",function(t,a){AOS.refresh(),console.log("layoutComplete")})});