!function(t){"use strict";function e(){var e=l.clientHeight,i=t.innerHeight;return console.log("clientHeight"),console.log(e),console.log("innerHeight"),console.log(i),e<i?i:e}function i(){return console.log(t.pageYOffset||l.scrollTop),t.pageYOffset||l.scrollTop}function o(t){var e=0,i=0;do isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft);while(t===t.offsetParent);return console.log("offsetTop "+e),console.log("offsetLeft"+i),{top:e,left:i}}function n(t,n){var s=t.offsetHeight,r=i(),l=r+e(),a=o(t).top,c=a+s,n=n||0;return a+s*n<=l&&c-s*n>=r}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(t,e){this.el=t,this.options=s(this.defaults,e),this._init()}var l=t.document.documentElement;r.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > li")),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1;var e=this;imagesLoaded(this.el,function(){new Masonry(e.el,{itemSelector:"li",transitionDuration:0}),Modernizr.cssanimations&&(e.items.forEach(function(t,i){n(t)&&(e._checkTotalRendered(),classie.add(t,"shown"))}),t.addEventListener("scroll",function(){e._onScrollFn()},!1),t.addEventListener("resize",function(){e._resizeHandler()},!1))})},_onScrollFn:function(){var t=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){t._scrollPage()},60))},_scrollPage:function(){var t=this;this.items.forEach(function(o,s){classie.has(o,"shown")||classie.has(o,"animate")||!n(o,t.options.viewportFactor)||setTimeout(function(){var n=i()+e()/2;if(t.el.style.WebkitPerspectiveOrigin="50% "+n+"px",t.el.style.MozPerspectiveOrigin="50% "+n+"px",t.el.style.perspectiveOrigin="50% "+n+"px",t._checkTotalRendered(),t.options.minDuration&&t.options.maxDuration){var s=Math.random()*(t.options.maxDuration-t.options.minDuration)+t.options.minDuration+"s";o.style.WebkitAnimationDuration=s,o.style.MozAnimationDuration=s,o.style.animationDuration=s}classie.add(o,"animate")},25)}),this.didScroll=!1},_resizeHandler:function(){function t(){e._scrollPage(),e.resizeTimeout=null}var e=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(t,1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&t.removeEventListener("scroll",this._onScrollFn)}},t.AnimOnScroll=r}(window);